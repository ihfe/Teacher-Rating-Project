const languageMap = {
    'zh': {
        'createEvent': '创建事件',
        'teacherEvaluation': '教师评价',
        'submissionResult': '填写结果',
        'submissionSuccess': '问卷提交成功',
        'questionnairePreview': '问卷预览',
        'selectClass': '选择班级',
        'selectQuestionnaire': '问卷选择',
        'selectEvent': '选择事件',
        'ratingFunctionOverview': '评分功能概述',
        'title': '教师评分系统',
        'courseTeacher': '任课教师',
        'class': '班级',
        'course': '课程',
        'totalScore': '总分',
        'description': '描述',
        'createTime': '创建时间',
        'switchLang': '切换语言',
        'teacherDetailStats': '教师详细统计',
        'classDetailStats': '班级详细统计',
        'teacherAverageStats': '教师各班均值统计',
        'manage': '管理',
        'systemTitle': '教师评价管理系统',
        'home': '首页',
        'rating': '评分',
        'questionnaire': '问卷',
        'profile': '个人信息',
        'logout': '退出登录',
        'register': '注册',
        'login': '登录',
        'questionnaireDetail': '问卷详情',
        'classCourseName': '班级-课程名称',
        'ratingItemTitle': '评分项标题',
        'ratingLevelTitle': '评分等级',
        'submit': '提交',
        'classManagement': '班级管理',
        'teacherManagement': '教师管理',
        'courseManagement': '课程管理',
        'classPreview': '班级预览',
        'teacherPreview': '教师预览',
        'coursePreview': '课程预览',
        'deleteClass': '删除班级',
        'addClass': '添加班级',
        'deleteTeacher': '删除教师',
        'addTeacher': '添加教师',
        'deleteCourse': '删除课程',
        'addCourse': '添加课程',
        'name': '姓名',
        'className': '名称',
        'headTeacher': '班主任',
        'courseName': '课程名',
        'remark': '备注',
        'features': '功能项',
        'eventManagement': '事件管理',
        'ratingItemManagement': '评分项管理',
        'ratingItemPreview': '评分项预览',
        'deleteRatingItem': '删除评分项',
        'addRatingItem': '添加评分项',
        'ratingItemName': '评分项名称',
        'levelDisplay': '级别显示',
        'points': '分',
        'eventPreview': '事件预览',
        'deleteEvent': '删除事件',
        'addEvent': '添加事件',
        'reportAnalysis': '报表分析',
        'createSuccess': '创建成功',
        'createFailed': '创建失败',
        'failureReason': '失败原因',
        'closePage': '关闭页面',
        'remarks': '备注',
        'teacherName': '教师姓名',
        'associate': '关联',
        'associateCourse': '关联课程',
        'modifyCourse': '修改课程',
        'modifyTeacher': '修改教师',
        'modifyClass': '修改班级',
        'createTeacher': '创建教师',
        'createClass': '创建班级',
        'createCourse': '创建课程',
        'create': '创建',
        'modify': '修改',
        'associatedCourses': '关联课程',
        'basicInfo': '基本信息',
        'eventStatus': '事件状态',
        'inProgress': '进行中',
        'completed': '已完成',
        'eventName': '事件名称',
        'votesPerItem': '每项投票数',
        'currentOnlyAnonymous': '(目前仅支持不记名形式)',
        'voteType': '投票类型',
        'anonymousVote': '不记名投票',
        'namedVote': '记名投票',
        'classificationMethod': '分类方式',
        'currentOnlyByClass': '(目前仅支持按班级分类)',
        'allClasses': '所有班级',
        'select': '选择',
        'scoringItems': '评分项目',
        'detailedInfo': '详细信息',
        'classTable': '班级表格',
        'teacherTable': '教师表格',
        'teacherAverageTable': '教师均分表格',
        'details': '详情',
        'eventDetails': '事件详情'
    },
    'en': {
        'createEvent': 'Create Event',
        'teacherEvaluation': 'Teacher Evaluation',
        'submissionResult': 'Submission Result',
        'submissionSuccess': 'Questionnaire Submitted Successfully',
        'questionnairePreview': 'Questionnaire Preview',
        'selectClass': 'Select Class',
        'selectQuestionnaire': 'Select Questionnaire',
        'selectEvent': 'Select Event',
        'ratingFunctionOverview': 'Rating Function Overview',
        'title': 'Teacher Rating System',
        'courseTeacher': 'Course Teacher',
        'class': 'Class',
        'course': 'Course',
        'totalScore': 'Total Score',
        'description': 'Description',
        'createTime': 'Create Time',
        'switchLang': 'Switch Language',
        'teacherDetailStats': 'Teacher Detail Statistics',
        'classDetailStats': 'Class Detail Statistics',
        'teacherAverageStats': 'Teacher Average Statistics',
        'manage': 'Manage',
        'systemTitle': 'Teacher Rating Management System',
        'home': 'Home',
        'rating': 'Rating',
        'questionnaire': 'Questionnaire',
        'profile': 'Profile',
        'logout': 'Logout',
        'register': 'Register',
        'login': 'Login',
        'questionnaireDetail': 'Questionnaire Detail',
        'classCourseName': 'Class-Course Name',
        'ratingItemTitle': 'Rating Item Title',
        'ratingLevelTitle': 'Rating Level',
        'submit': 'Submit',
        'classManagement': 'Class Management',
        'teacherManagement': 'Teacher Management',
        'courseManagement': 'Course Management',
        'classPreview': 'Class Preview',
        'teacherPreview': 'Teacher Preview',
        'coursePreview': 'Course Preview',
        'deleteClass': 'Delete Class',
        'addClass': 'Add Class',
        'deleteTeacher': 'Delete Teacher',
        'addTeacher': 'Add Teacher',
        'deleteCourse': 'Delete Course',
        'addCourse': 'Add Course',
        'name': 'Name',
        'className': 'Name',
        'headTeacher': 'Head Teacher',
        'courseName': 'Course Name',
        'remark': 'Remark',
        'features': 'Features',
        'eventManagement': 'Event Management',
        'ratingItemManagement': 'Rating Item Management',
        'ratingItemPreview': 'Rating Item Preview',
        'deleteRatingItem': 'Delete Rating Item',
        'addRatingItem': 'Add Rating Item',
        'ratingItemName': 'Rating Item Name',
        'levelDisplay': 'Level Display',
        'points': 'points',
        'eventPreview': 'Event Preview',
        'deleteEvent': 'Delete Event',
        'addEvent': 'Add Event',
        'reportAnalysis': 'Report Analysis',
        'createSuccess': 'Create Success',
        'createFailed': 'Create Failed',
        'failureReason': 'Failure Reason',
        'closePage': 'Close Page',
        'remarks': 'Remarks',
        'teacherName': 'Teacher Name',
        'associate': 'Associate',
        'associateCourse': 'Associate Course',
        'modifyCourse': 'Modify Course',
        'modifyTeacher': 'Modify Teacher',
        'modifyClass': 'Modify Class',
        'createTeacher': 'Create Teacher',
        'createClass': 'Create Class',
        'createCourse': 'Create Course',
        'create': 'Create',
        'modify': 'Modify',
        'associatedCourses': 'Associated Courses',
        'basicInfo': 'Basic Information',
        'eventStatus': 'Event Status',
        'inProgress': 'In Progress',
        'completed': 'Completed',
        'eventName': 'Event Name',
        'votesPerItem': 'Votes Per Item',
        'currentOnlyAnonymous': '(Currently only anonymous voting is supported)',
        'voteType': 'Vote Type',
        'anonymousVote': 'Anonymous Vote',
        'namedVote': 'Named Vote',
        'classificationMethod': 'Classification Method',
        'currentOnlyByClass': '(Currently only classification by class is supported)',
        'allClasses': 'All Classes',
        'select': 'Select',
        'scoringItems': 'Scoring Items',
        'detailedInfo': 'Detailed Information',
        'classTable': 'Class Table',
        'teacherTable': 'Teacher Table',
        'teacherAverageTable': 'Teacher Average Table',
        'details': 'Details',
        'eventDetails': 'Event Details'
    }
};

let currentLang = localStorage.getItem('preferredLanguage') || 'zh';

function switchLanguage() {
    currentLang = currentLang === 'zh' ? 'en' : 'zh';
    localStorage.setItem('preferredLanguage', currentLang);
    updatePageLanguage();
}

function updatePageLanguage() {
    const elements = document.querySelectorAll('[data-lang-key]');
    elements.forEach(element => {
        const key = element.getAttribute('data-lang-key');
        if (languageMap[currentLang][key]) {
            element.textContent = languageMap[currentLang][key];
        }
    });
}

document.addEventListener('DOMContentLoaded', () => {
    updatePageLanguage();
});